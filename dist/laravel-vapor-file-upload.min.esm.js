var e=/*#__PURE__*/function(){function e(){}return e.requestSignedUrl=function(e,t){void 0===t&&(t={});try{return Promise.resolve(new Promise(function(r){var n=new XMLHttpRequest;n.open("POST","/vapor/signed-storage-url"),n.onload=function(){return r(n.response)},n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("X-CSRF-TOKEN",document.querySelector('meta[name="csrf-token"]').getAttribute("content")),n.send(JSON.stringify({bucket:t.bucket||"",content_type:t.contentType||e.type,expires:t.expires||"",visibility:t.visibility||"public-read"}))})).then(JSON.parse)}catch(e){return Promise.reject(e)}},e.sendFile=function(e,t,r,n){void 0===r&&(r={}),void 0===n&&(n={});try{return Promise.resolve(new Promise(function(s){var o=new XMLHttpRequest;for(var i in o.open("PUT",e),o.onload=function(){return s(o.response)},r.progress&&(o.upload.onprogress=function(e){return r.progress(Math.ceil(e.loaded/e.total*100))}),n)o.setRequestHeader(i,n[i]);o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("X-CSRF-TOKEN",document.querySelector('meta[name="csrf-token"]').getAttribute("content")),o.setRequestHeader("Content-Type",r.contentType||t.type),o.send(t)}))}catch(e){return Promise.reject(e)}},e.store=function(e,t){void 0===t&&(t={});try{var r=this;return Promise.resolve(r.requestSignedUrl(e,t)).then(function(n){return"Host"in n.headers&&delete n.headers.Host,"Content-Type"in n.headers&&delete n.headers["Content-Type"],Promise.resolve(r.sendFile(n.url,e,t,n.headers)).then(function(){return e.name&&(n.extension=e.name.split(".").pop()),n})})}catch(e){return Promise.reject(e)}},e}();export{e as default};
//# sourceMappingURL=laravel-vapor-file-upload.min.esm.js.map
