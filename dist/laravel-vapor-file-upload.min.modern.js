class e{static async requestSignedUrl(e,t={}){return JSON.parse(await new Promise(function(s){let n=new XMLHttpRequest;n.open("POST","/vapor/signed-storage-url"),n.onload=()=>s(n.response),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("X-CSRF-TOKEN",document.querySelector('meta[name="csrf-token"]').getAttribute("content")),n.send(JSON.stringify({bucket:t.bucket||"",content_type:t.contentType||e.type,expires:t.expires||"",visibility:t.visibility||"public-read"}))}))}static async sendFile(e,t,s={},n={}){return await new Promise(function(r){let a=new XMLHttpRequest;a.open("PUT",e),a.onload=()=>r(a.response),s.progress&&(a.upload.onprogress=e=>s.progress(Math.ceil(e.loaded/e.total*100)));for(const e in n)a.setRequestHeader(e,n[e]);a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("X-CSRF-TOKEN",document.querySelector('meta[name="csrf-token"]').getAttribute("content")),a.setRequestHeader("Content-Type",s.contentType||t.type),a.send(t)})}static async store(e,t={}){let s=await this.requestSignedUrl(e,t);return"Host"in s.headers&&delete s.headers.Host,"Content-Type"in s.headers&&delete s.headers["Content-Type"],await this.sendFile(s.url,e,t,s.headers),e.name&&(s.extension=e.name.split(".").pop()),s}}export{e as default};
//# sourceMappingURL=laravel-vapor-file-upload.min.modern.js.map
